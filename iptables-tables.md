# `iptables` tables

Each table is used for different kinds of packet handling, and each chain is invoked at different points in the Linux packet traversal path:
* *Table*. A set of *chains*.
* *Chain*. A list (stack; order matters) of *rules*.
* *Rule*: A matching condition (on packets) and an action (ACCEPT, DROP, REDIRECT, etc.).

- Filter (firewall rules). Filter incoming (INPUT), ongoing (OUTPUT) and forwarding (FORWARD) traffic.
    - `INPUT`. For packets *destined* to the computer.
    - `OUTPUT`. For packets *generated by* the computer.
    - `FORWARD`. For packets *routed through* the computer, and not intended for it (e.g., in a router setup).
- NAT (Network Address Translation) Table. Modify source/destination IPs or ports for routing or masquerading (redirection).
    - `PREROUTING`. Alter packets *before routing* (Destination NAT to redirect traffic).
    - `POSTROUTING`. Alter packets *after routing*, just before leaving the interface (Source NAT to change IP).
    - `OUTPUT`. Applies to *locally generated packets before routing*.

>  The NAT table doesn't forward packets per se, it modifies addresses to facilitate routing.

- Mangle Table. Used to alter packets and/or connections.
    - `PREROUTING`
    - `INPUT`
    - `OUTPUT`
    - `FORWARD`
    - `POSTROUTING`

The *order of evaluation* matters. `PREROUTING` and `POSTROUTING` are evaluated before and after the routing decision, respectively, which affect how `INPUT`, `FORWARD`, and `OUTPUT` behave.

